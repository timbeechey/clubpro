<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>clubpro • clubpro</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="clubpro">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">clubpro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/clubpro.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/timbeechey/clubpro/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>clubpro</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/timbeechey/clubpro/blob/master/vignettes/clubpro.Rmd" class="external-link"><code>vignettes/clubpro.Rmd</code></a></small>
      <div class="d-none name"><code>clubpro.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p><code>clubpro</code> is an implementation of a subset of the methods
described in Grice (2011) for classification of observations using
binary procrustes rotation. Binary procrustes rotation can be used to
quantify how well observed data can be classified into known categories.
A high degree of classification accuracy indicates that the ordering of
the observed data is well explained by particular categories or
experimental conditions.</p>
</div>
<div class="section level2">
<h2 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h2>
<p><code>clubpro</code> can be installed from CRAN with the command
<code>install.packages("clubpro")</code> and loaded in the usual
way.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://timbeechey.github.io/clubpro/">clubpro</a></span><span class="op">)</span></span></code></pre></div>
<p>The plots provided by <code>clubpro</code> use the colour palette
loaded in the current R session. You may specify the plot colours by
passing a vector of colours to <code><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#0073C2"</span>, <span class="st">"#EFC000"</span>, <span class="st">"#868686"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="classifying-catch-location-by-jellyfish-size">Classifying catch location by jellyfish size<a class="anchor" aria-label="anchor" href="#classifying-catch-location-by-jellyfish-size"></a>
</h2>
<p>Hand et. at. (1994) provide data on the <code>width</code> and
<code>length</code> in mm of jellyfish caught at two
<code>location</code>s in New South Wales, Australia:
<code>Dangar Island</code> and <code>Salamander Bay</code>.</p>
<p>To quantify how well jellyfish <code>width</code> is predicted by
catch <code>location</code>, binary procrustes rotation can be performed
with <code>clubpro</code> by passing a <code>formula</code> object of
the form <code>observed variable ~ predictor variables(s)</code> and a
<code>data.frame</code> containing the data to the <code><a href="../reference/club.html">club()</a></code>
function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/club.html">club</a></span><span class="op">(</span><span class="va">width</span> <span class="op">~</span> <span class="va">location</span>, data <span class="op">=</span> <span class="va">jellyfish</span><span class="op">)</span></span></code></pre></div>
<p>The two most important statistics returned by the <code><a href="../reference/club.html">club()</a></code>
function are the percentage of correct classifications (PCC), and the
chance-value.</p>
<p>The PCC is the percenatge of observations in the data which are
classified into the correct category. The PCC returned by
<code><a href="../reference/club.html">club()</a></code> can be accessed using the <code><a href="../reference/pcc.html">pcc()</a></code>
function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pcc.html">pcc</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 84.78261</span></span></code></pre></div>
<p>The chance-value is computed using a randomisation test to determine
how frequently a PCC at least as high as that computed for the observed
ordering of data is found from random reorderings of the data. Calling
the <code><a href="../reference/cval.html">cval()</a></code> function on an object returned by
<code><a href="../reference/club.html">club()</a></code> shows the chance-value of the model. Note that
because the chance-value is computed using a randomisation test, the
value will be slightly different each time the model is run.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cval.html">cval</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.011</span></span></code></pre></div>
<p>More detailed classification model results can be returned using the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function. Note that values in the
<code>summary</code> output are rounded according to the
<code>digits</code> argument to <code>summary</code> which defaults to
2.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt; ********** Model Summary **********</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ----- Classification Results -----</span></span>
<span><span class="co">#&gt; Observations:  46 </span></span>
<span><span class="co">#&gt; Missing observations:  0 </span></span>
<span><span class="co">#&gt; Target groups:  2 </span></span>
<span><span class="co">#&gt; Correctly classified observations:  39 </span></span>
<span><span class="co">#&gt; Incorrectly classified observations:  7 </span></span>
<span><span class="co">#&gt; Ambiguously classified observations:  0 </span></span>
<span><span class="co">#&gt; PCC:  84.78 </span></span>
<span><span class="co">#&gt; Median classification strength index:  1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ----- Randomisation Test Results -----</span></span>
<span><span class="co">#&gt; Random reorderings:  1000 </span></span>
<span><span class="co">#&gt; Minimum random PCC:  52.17 </span></span>
<span><span class="co">#&gt; Maximum random PCC:  86.96 </span></span>
<span><span class="co">#&gt; Chance-value:  0.01</span></span></code></pre></div>
<p>The classification of the observed data can be visualised by plotting
the model object using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_jellyfish-1.png" width="768"></p>
<p>Plotting the classification results shows that observed
<code>width</code> values of 11 mm and smaller are consistently placed
into the <code>Dangar Island</code> category, while observed
<code>width</code> values of at least 16.5 mm are all placed into the
<code>Salamader Bay</code> category. From these results we can see that
the boundary between the two categories is somewhere between 11 and
16.5. However, it is not clear from the plot exactly where the most
likely boundary falls. Grice et. al. (2016) suggest that in the case of
binary classification, the optimal category boundary can be determined
by calculating a PCC for each possible boundary location. This can be
achieved using the <code><a href="../reference/threshold.html">threshold()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/threshold.html">threshold</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;     obs      PCC</span></span>
<span><span class="co">#&gt; 1   6.0 54.34783</span></span>
<span><span class="co">#&gt; 2   6.5 58.69565</span></span>
<span><span class="co">#&gt; 3   7.0 65.21739</span></span>
<span><span class="co">#&gt; 4   8.0 73.91304</span></span>
<span><span class="co">#&gt; 5   9.0 76.08696</span></span>
<span><span class="co">#&gt; 6  10.0 78.26087</span></span>
<span><span class="co">#&gt; 7  11.0 84.78261</span></span>
<span><span class="co">#&gt; 8  12.0 84.78261</span></span>
<span><span class="co">#&gt; 9  13.0 84.78261</span></span>
<span><span class="co">#&gt; 10 14.0 82.60870</span></span>
<span><span class="co">#&gt; 11 15.0 76.08696</span></span>
<span><span class="co">#&gt; 12 16.0 67.39130</span></span>
<span><span class="co">#&gt; 13 16.5 65.21739</span></span>
<span><span class="co">#&gt; 14 17.0 63.04348</span></span>
<span><span class="co">#&gt; 15 18.0 56.52174</span></span>
<span><span class="co">#&gt; 16 19.0 52.17391</span></span>
<span><span class="co">#&gt; 17 20.0 50.00000</span></span></code></pre></div>
<p>Plotting the object returned by <code><a href="../reference/threshold.html">threshold()</a></code> shows that
three adjacent category boundary locations produce equal maximum PCCs.
This indicates that the optimal category boundary for classification
occurs between 11 and 13 mm.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/threshold.html">threshold</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_theshold-1.png" width="768"></p>
<p>For each observation, a classification strength index (CSI) between 0
and 1 is returned. A value of 1 indicates that an observed value was
matched perfectly by the rotation, whereas lower CSI values indicate
that observations were matched less well. The CSI values can be accessed
using the <code><a href="../reference/csi.html">csi()</a></code> function, or visualised by plotting the
object returned by a call to the <code><a href="../reference/csi.html">csi()</a></code> function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_csi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csi.html">csi</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod_csi</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_csi-1.png" width="576"></p>
<p>The predicted categories determined by the model can be tabulated
using the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function. In this case, of the 22
jellyfish caught at <code>Dangar Island</code>, 17 were classified as
having come from <code>Dangar Island</code> and 5 were classified as
having come from <code>Salamander Bay</code>. Of the 24 jellyfish caught
at <code>Salamander Bay</code>, 2 were classified as having come from
<code>Dangar Island</code> and 22 were correctly classified as having
come from <code>Salamander Bay</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 </span></span>
<span><span class="co">#&gt;                  Dangar Island Salamander Bay</span></span>
<span><span class="co">#&gt;   Dangar Island             17              5</span></span>
<span><span class="co">#&gt;   Salamander Bay             2             22</span></span></code></pre></div>
<p>These predictions can be visualised as a mosaic plot by plotting the
object returned by the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_predictions-1.png" width="768"></p>
<p>The same information can be tabulated in terms of prediction accuracy
using the <code><a href="../reference/accuracy.html">accuracy()</a></code> function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/accuracy.html">accuracy</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 </span></span>
<span><span class="co">#&gt;                  correct incorrect ambiguous</span></span>
<span><span class="co">#&gt;   Dangar Island       17         5         0</span></span>
<span><span class="co">#&gt;   Salamander Bay      22         2         0</span></span></code></pre></div>
<p>As with predicted categories, prediction accuracy can also be plotted
in the form of a mosaic plot using <code>plot(accuracy())</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/accuracy.html">accuracy</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_accuracy-1.png" width="768"></p>
<p>The calculation of the chance-value as the frequency of occurance
PCCs from randomly reordered data at least as high as the PCC of the
observed data ordering can be visualised by plotting the output of the
<code><a href="../reference/pcc_replicates.html">pcc_replicates()</a></code> function. Calling the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
function on the output of <code><a href="../reference/pcc_replicates.html">pcc_replicates()</a></code> produces a
histogram of the PCCs resulting from all random orderings of the data.
The chance value calculated by the model is the frequency with which
PCCs produced from random reorderings of the data are at least as high
as the PCC produced by the observed data ordering, indicated in the plot
by a dashed vertical line.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/pcc_replicates.html">pcc_replicates</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="clubpro_files/figure-html/plot_cval_dist-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Grice, J. W. (2011). <em>Observation oriented modeling: Analysis of
cause in the behavioral sciences</em>. Academic Press.</p>
<p>Grice, J. W., Cota, L. D., Barrett, P. T., Wuensch, K. L., &amp;
Poteat, G. M. (2016). A Simple and Transparent Alternative to Logistic
Regression. <em>Advances in Social Sciences Research Journal</em>, 3(7),
147–165.</p>
<p>Hand, D. J., Daly, F., Lunn, A. D., McConway, K. J. and Ostrowski, E.
(1994). <em>A Handbook of Small Data Sets</em>. Chapman &amp; Hall.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Timothy Beechey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
